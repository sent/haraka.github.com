__NUXT_JSONP__("/plugins/tls", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av){return {data:[{document:{slug:N,title:N,position:76,category:"Plugins",toc:[{id:O,depth:B,text:P},{id:Q,depth:B,text:R},{id:S,depth:B,text:T},{id:U,depth:B,text:V},{id:W,depth:B,text:X},{id:A,depth:m,text:A},{id:C,depth:m,text:C},{id:I,depth:m,text:I},{id:J,depth:m,text:J},{id:Y,depth:m,text:Z},{id:_,depth:m,text:$},{id:F,depth:m,text:F},{id:aa,depth:m,text:ab},{id:ac,depth:m,text:ad},{id:ae,depth:m,text:af},{id:ag,depth:m,text:ah},{id:ai,depth:m,text:aj},{id:ak,depth:B,text:al}],body:{type:"root",children:[{type:b,tag:g,props:{},children:[{type:a,value:"This plugin enables the use of TLS (via "},{type:b,tag:e,props:{},children:[{type:a,value:"STARTTLS"}]},{type:a,value:") in Haraka."}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"For this plugin to work you must have SSL certificates installed correctly."}]},{type:a,value:c},{type:b,tag:D,props:{id:O},children:[{type:b,tag:h,props:{href:"#certificate-files",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:P}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Defaults are shown and can be overridden in "},{type:b,tag:e,props:{},children:[{type:a,value:L}]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,H]},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:A}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"tls_key.pem"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:C}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"tls_cert.pem"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:F}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:am}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:D,props:{id:Q},children:[{type:b,tag:h,props:{href:"#certificate-directory",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:R}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"If the directory "},{type:b,tag:e,props:{},children:[{type:a,value:an}]},{type:a,value:" exists, each file within the directory is expected to be a PEM encoded TLS bundle. Generate the PEM bundles in The Usual Way[TM] by concatenating the key, certificate, and CA\u002Fchain certs in that order. Example:"}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,E]},children:[{type:b,tag:e,props:{},children:[{type:a,value:"cat example.com.key example.com.crt ca.crt \u003E config\u002Ftls\u002Fexample.com.pem\n"}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"An example "},{type:b,tag:h,props:{href:"https:\u002F\u002Facme.sh",rel:[w,x,y],target:z},children:[{type:a,value:"acme.sh"}]},{type:a,value:" deployment "},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fmsimerson\u002FMail-Toaster-6\u002Fblob\u002Fmaster\u002Fprovision-letsencrypt.sh",rel:[w,x,y],target:z},children:[{type:a,value:"script"}]},{type:a,value:" demonstrates how to install "},{type:b,tag:h,props:{href:"https:\u002F\u002Fletsencrypt.org",rel:[w,x,y],target:z},children:[{type:a,value:"Let's Encrypt"}]},{type:a,value:" certificates to the Haraka "},{type:b,tag:e,props:{},children:[{type:a,value:an}]},{type:a,value:"directory."}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Haraka has "},{type:b,tag:h,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FServer_Name_Indication",rel:[w,x,y],target:z},children:[{type:a,value:"SNI"}]},{type:a,value:" support. When the remote MUA\u002FMTA presents a servername during the TLS handshake and a TLS certificate with that Common Name matches, that certificate will be presented. If no match is found, the default certificate (see Certificate Files above) is presented."}]},{type:a,value:c},{type:b,tag:D,props:{id:S},children:[{type:b,tag:h,props:{href:"#purchased-certificate",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:T}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"If you have a purchased certificate, append any intermediate\u002Fchained\u002Fca-cert\nfiles to the certificate in this order:"}]},{type:a,value:c},{type:b,tag:"ol",props:{},children:[{type:a,value:c},{type:b,tag:M,props:{},children:[{type:a,value:"The CA signed SSL cert"}]},{type:a,value:c},{type:b,tag:M,props:{},children:[{type:a,value:"Any intermediate certificates"}]},{type:a,value:c},{type:b,tag:M,props:{},children:[{type:a,value:"The CA root certificate"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"See also "},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fharaka\u002FHaraka\u002Fwiki\u002FSetting-up-TLS-with-CA-certificates",rel:[w,x,y],target:z},children:[{type:a,value:"Setting Up TLS"}]}]},{type:a,value:c},{type:b,tag:D,props:{id:U},children:[{type:b,tag:h,props:{href:"#self-issued-unsigned-certificate",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:V}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Create a certificate and key file in the config directory with the following\ncommand:"}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,E]},children:[{type:b,tag:e,props:{},children:[{type:a,value:"openssl req -x509 -nodes -days 2190 -newkey rsa:2048 \\\n        -keyout config\u002Ftls_key.pem -out config\u002Ftls_cert.pem\n"}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"You will be prompted to provide details of your organization. Make sure the\nCommon Name is set to your servers Fully Qualified Domain Name, which should\nbe the same as the contents of your "},{type:b,tag:e,props:{},children:[{type:a,value:"config\u002Fme"}]},{type:a,value:" file."}]},{type:a,value:c},{type:b,tag:D,props:{id:W},children:[{type:b,tag:h,props:{href:"#configuration",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:X}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"The following settings can be specified in "},{type:b,tag:e,props:{},children:[{type:a,value:L}]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:n,props:{id:A},children:[{type:b,tag:h,props:{href:"#key",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:A}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Specifies an alternative location for the key file. For multiple keys, use "},{type:b,tag:e,props:{},children:[{type:a,value:"key[]="}]},{type:a,value:ao},{type:b,tag:e,props:{},children:[{type:a,value:K}]},{type:a,value:" directory."}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"To configure a single key and a cert chain, located in the "},{type:b,tag:e,props:{},children:[{type:a,value:K}]},{type:a,value:"\ndirectory, use the following in "},{type:b,tag:e,props:{},children:[{type:a,value:"tls.ini"}]},{type:a,value:":"}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,H]},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:A}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"example.com.key.pem"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:C}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"example.com.crt-chain.pem"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"To use multiple pairs of key and cert chain files outside of the haraka\n"},{type:b,tag:e,props:{},children:[{type:a,value:K}]},{type:a,value:" directory, configure instead:"}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,H]},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:ap}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"\u002Fetc\u002Fssl\u002Fprivate\u002Fexample.com.rsa.key.pem"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:aq}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"\u002Fetc\u002Fssl\u002Fprivate\u002Fexample.com.rsa.crt-chain.pem"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:ap}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"\u002Fetc\u002Fssl\u002Fprivate\u002Fexample.com.ecdsa.key.pem"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:aq}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"\u002Fetc\u002Fssl\u002Fprivate\u002Fexample.com.ecdsa.crt-chain.pem"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:n,props:{id:C},children:[{type:b,tag:h,props:{href:"#cert",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Specifies the location(s) for the certificate chain file. For multiple certificate chains, use "},{type:b,tag:e,props:{},children:[{type:a,value:"cert[]="}]},{type:a,value:ao},{type:b,tag:e,props:{},children:[{type:a,value:K}]},{type:a,value:" directory. See the description of the "},{type:b,tag:e,props:{},children:[{type:a,value:A}]},{type:a,value:" parameter for specific use."}]},{type:a,value:c},{type:b,tag:n,props:{id:I},children:[{type:b,tag:h,props:{href:"#no_tls_hosts",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"If needed, add this section to the "},{type:b,tag:e,props:{},children:[{type:a,value:L}]},{type:a,value:" file and list any IP ranges that have broken TLS hosts. Ex:"}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,H]},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[f,"selector"]},children:[{type:a,value:"[no_tls_hosts]"}]},{type:a,value:"\n192.168.1.3\n172.16.0.0\u002F16\n"}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"The "},{type:b,tag:h,props:{href:"http:\u002F\u002Fnodejs.org\u002Fapi\u002Ftls.html",rel:[w,x,y],target:z},children:[{type:a,value:"Node.js TLS"}]},{type:a,value:" page has additional information about the following options."}]},{type:a,value:c},{type:b,tag:n,props:{id:J},children:[{type:b,tag:h,props:{href:"#ciphers",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"A list of allowable ciphers to use. Example:"}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,E]},children:[{type:b,tag:e,props:{},children:[{type:a,value:"ciphers=EECDH+AESGCM:EDH+aRSA+AESGCM:EECDH+AES256:EDH+aRSA+AES256:EECDH+AES128:EDH+aRSA+AES128:RSA+AES:RSA+3DES\n"}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"See also: "},{type:b,tag:h,props:{href:"http:\u002F\u002Fcipherli.st",rel:[w,x,y],target:z},children:[{type:a,value:"Strong SSL Ciphers"}]},{type:a,value:" and the "},{type:b,tag:h,props:{href:"https:\u002F\u002Fwww.ssllabs.com\u002Fssltest\u002Findex.html",rel:[w,x,y],target:z},children:[{type:a,value:"SSLlabs Test Page"}]}]},{type:a,value:c},{type:b,tag:n,props:{id:Y},children:[{type:b,tag:h,props:{href:"#honorcipherorder",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:Z}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"If specified, the list of configured ciphers is treated as the cipher priority from highest to lowest. The first matching cipher will be used, instead of letting the client choose. The default is "},{type:b,tag:e,props:{},children:[{type:a,value:i}]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:n,props:{id:_},children:[{type:b,tag:h,props:{href:"#ecdhcurve",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:$}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Specifies the elliptic curve used for ECDH or ECDHE ciphers.\nOnly one curve can be specified. The default is "},{type:b,tag:e,props:{},children:[{type:a,value:"prime256v1"}]},{type:a,value:" (NIST P-256)."}]},{type:a,value:c},{type:b,tag:n,props:{id:F},children:[{type:b,tag:h,props:{href:"#dhparam",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:F}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Specifies the file containing the diffie-hellman parameters to use for DH or DHE key exchange. If this param or file is missing, it will be generated automatically. Default: "},{type:b,tag:e,props:{},children:[{type:a,value:am}]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:n,props:{id:aa},children:[{type:b,tag:h,props:{href:"#requestcert",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:ab}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Whether Haraka should request a certificate from a connecting client."}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,E]},children:[{type:b,tag:e,props:{},children:[{type:a,value:"requestCert=[true|false]  (default: true)\n"}]}]}]},{type:a,value:c},{type:b,tag:n,props:{id:ac},children:[{type:b,tag:h,props:{href:"#rejectunauthorized",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:ad}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Reject connections from clients without a CA validated TLS certificate."}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,E]},children:[{type:b,tag:e,props:{},children:[{type:a,value:"rejectUnauthorized=[true|false]  (default: false)\n"}]}]}]},{type:a,value:c},{type:b,tag:n,props:{id:ae},children:[{type:b,tag:h,props:{href:"#requireauthorized",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:af}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"When "},{type:b,tag:e,props:{},children:[{type:a,value:"rejectUnauthorized=false"}]},{type:a,value:", require validated TLS certificates on just the specified ports."}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,H]},children:[{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{className:[f,s]},children:[{type:a,value:"requireAuthorized[]"}]},{type:b,tag:d,props:{className:[f,t]},children:[{type:b,tag:d,props:{className:[f,u]},children:[{type:a,value:v}]},{type:a,value:"465"}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,"comment"]},children:[{type:a,value:";requireAuthorized[]=587"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:n,props:{id:ag},children:[{type:b,tag:h,props:{href:"#secureprotocol",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:ah}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Specifies the OpenSSL API function used for handling the TLS session. Choose\none of the methods described at the\n"},{type:b,tag:h,props:{href:"https:\u002F\u002Fwww.openssl.org\u002Fdocs\u002Fmanmaster\u002Fssl\u002Fssl.html",rel:[w,x,y],target:z},children:[{type:a,value:"OpenSSL API page"}]},{type:a,value:".\nThe default is "},{type:b,tag:e,props:{},children:[{type:a,value:"SSLv23_method"}]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:n,props:{id:ai},children:[{type:b,tag:h,props:{href:"#requestocsp",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:aj}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Specifies that OCSP Stapling should be enabled, according to RFC 6066.\nStapling of OCSP messages allows the client to receive these along the\nTLS session setup instead of delaying the session setup by requiring a\nseparate http connection to the OCSP server."}]},{type:a,value:c},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,E]},children:[{type:b,tag:e,props:{},children:[{type:a,value:"requestOCSP=[true|false]  (default: false)\n"}]}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"OCSP responses from the OCSP server are cached in memory for as long as\nthey are valid, and get refreshed after that time. A server restart\nrequires the OCSP responses to be fetched again upon the first client\nconnection."}]},{type:a,value:c},{type:b,tag:D,props:{id:ak},children:[{type:b,tag:h,props:{href:"#inbound-specific-configuration",ariaHidden:i,tabIndex:j},children:[{type:b,tag:d,props:{className:[k,l]},children:[]}]},{type:a,value:al}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"By default the above options are shared with outbound mail (either\nusing "},{type:b,tag:e,props:{},children:[{type:a,value:ar}]},{type:a,value:", "},{type:b,tag:e,props:{},children:[{type:a,value:as}]},{type:a,value:" or plain outbound mail heading to\nan external destination). To make these options specific to inbound\nmail, put them under an "},{type:b,tag:e,props:{},children:[{type:a,value:"[inbound]"}]},{type:a,value:" parameter group. Outbound options\ncan go under an "},{type:b,tag:e,props:{},children:[{type:a,value:"[outbound]"}]},{type:a,value:" parameter group, and plugins that use\nSMTP tls for queueing such as "},{type:b,tag:e,props:{},children:[{type:a,value:as}]},{type:a,value:" and "},{type:b,tag:e,props:{},children:[{type:a,value:ar}]},{type:a,value:" can\nuse that plugin name for plugin specific options."}]}]},dir:"\u002Fen\u002Fplugins",path:"\u002Fen\u002Fplugins\u002Ftls",extension:".md",createdAt:at,updatedAt:at,to:"\u002Fplugins\u002Ftls"},prev:{slug:au,title:au,to:"\u002Fplugins\u002Fredis"},next:{slug:av,title:av,to:"\u002Fplugins\u002Ftoobusy"}}],fetch:[],mutations:[]}}("text","element","\n","span","code","token","p","a","true",-1,"icon","icon-link",3,"h3","div","nuxt-content-highlight","pre","line-numbers","constant","attr-value","punctuation","=","nofollow","noopener","noreferrer","_blank","key",2,"cert","h2","language-text","dhparam",".","language-ini","no_tls_hosts","ciphers","config\u002F","config\u002Ftls.ini","li","tls","certificate-files","Certificate Files","certificate-directory","Certificate Directory","purchased-certificate","Purchased Certificate","self-issued-unsigned-certificate","Self Issued (unsigned) Certificate","configuration","Configuration","honorcipherorder","honorCipherOrder","ecdhcurve","ecdhCurve","requestcert","requestCert","rejectunauthorized","rejectUnauthorized","requireauthorized","requireAuthorized","secureprotocol","secureProtocol","requestocsp","requestOCSP","inbound-specific-configuration","Inbound Specific Configuration","dhparams.pem","config\u002Ftls"," assignment for each. Non-absolute paths are relative to the ","key[]","cert[]","smtp_forward","smtp_proxy","2020-12-21T00:45:07.188Z","redis","toobusy")));