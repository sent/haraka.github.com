__NUXT_JSONP__("/plugins/greylist", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_){return {data:[{document:{slug:"greylist",title:"Greylist",position:54,category:"Plugins",toc:[{id:u,depth:2,text:v},{id:w,depth:o,text:x},{id:y,depth:o,text:z},{id:A,depth:o,text:B},{id:C,depth:o,text:D}],body:{type:"root",children:[{type:b,tag:f,props:{},children:[{type:a,value:"Basic greylisting plugin that follows common practices found on internets."}]},{type:a,value:c},{type:b,tag:"h2",props:{id:u},children:[{type:b,tag:i,props:{ariaHidden:j,href:"#principles-of-work",tabIndex:k},children:[{type:b,tag:l,props:{className:[m,n]},children:[]}]},{type:a,value:v}]},{type:a,value:c},{type:b,tag:p,props:{id:w},children:[{type:b,tag:i,props:{ariaHidden:j,href:"#notation",tabIndex:k},children:[{type:b,tag:l,props:{className:[m,n]},children:[]}]},{type:a,value:x}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The so-called "},{type:b,tag:d,props:{},children:[{type:a,value:E}]},{type:a,value:" consists of the following:"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"First subdomain of rDNS is stripped off (but no shorter than the domain boundary). This is considered a "},{type:b,tag:d,props:{},children:[{type:a,value:F}]},{type:a,value:r}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Envelope sender is the "},{type:b,tag:d,props:{},children:[{type:a,value:"sender"}]},{type:a,value:r}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"RCPT TO would supply the "},{type:b,tag:d,props:{},children:[{type:a,value:G}]},{type:a,value:r}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:F}]},{type:a,value:" in above notation is chosen unless:"}]},{type:a,value:c},{type:b,tag:"ol",props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"The connecting host has no PTR record, a.k.a. reverse DNS (rDNS). [gl]"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"The rDNS record contains the first two or last two octets of the IP address. [fcrdns]"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"The rDNS record contains the ‘short’, decimal, or hex representation of the full IP address. [fcrdns] [gl]"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Multiple rDNS records are returned. [gl]"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"The rDNS record cannot be verified by forward confirmation (e.g. FCrDNS). [fcrdns]"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"The top-level-domain (TLD) used is not valid. [gl]"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"In other cases, it's set to be the remote party's IP address."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We define the following time periods:"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:s}]},{type:a,value:":  between first connect and start of "},{type:b,tag:d,props:{},children:[{type:a,value:q}]},{type:a,value:". Defer."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:q}]},{type:a,value:":   between "},{type:b,tag:d,props:{},children:[{type:a,value:s}]},{type:a,value:" and start of "},{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:". Allow. Host must re-try within this window."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:":  comes after "},{type:b,tag:d,props:{},children:[{type:a,value:q}]},{type:a,value:". Allow up until the end of period, then let the record expire in case no connections were made."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{id:y},children:[{type:b,tag:i,props:{ariaHidden:j,href:"#algorithm",tabIndex:k},children:[{type:b,tag:l,props:{className:[m,n]},children:[]}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The greylist algo is as following:"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Party connects. All FcrDNS & DNSWL checks are run by earlier plugins."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Party sends "},{type:b,tag:d,props:{},children:[{type:a,value:G}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"If not already whitelisted\n"},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Check "},{type:b,tag:d,props:{},children:[{type:a,value:E}]},{type:a,value:" color (compare current TS against record creation TS)\n"},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:s}]},{type:a,value:t},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Create if no record exists. Defer."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:q}]},{type:a,value:t},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Allow. Promote record to "},{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:" status."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:t},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Allow. Update record TS."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"In special case, "},{type:b,tag:d,props:{},children:[{type:a,value:"data"}]},{type:a,value:" hook runs above algo for all recipients. If any matched, all inherit the action."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{id:A},children:[{type:b,tag:i,props:{ariaHidden:j,href:"#db-schema",tabIndex:k},children:[{type:b,tag:l,props:{className:[m,n]},children:[]}]},{type:a,value:B}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We store in Redis."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Key format for greylisting entries:"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"grey:${hostid}:${sender}:${recipient} - grey record"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"white:${hostid} - white record"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:H},{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:J,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,N]},children:[{type:b,tag:O,props:{},children:[{type:a,value:"{ first_connect: TS, whitelisted: TS, updated: TS, lifetime: TTL, tried: Integer, tried_when_greylisted: Integer }\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:P},{type:b,tag:d,props:{},children:[{type:a,value:Q}]},{type:a,value:": TS of first connection (sender)\n"},{type:b,tag:d,props:{},children:[{type:a,value:"whitelisted"}]},{type:a,value:": basically the TS of this entry creation\n"},{type:b,tag:d,props:{},children:[{type:a,value:R}]},{type:a,value:S},{type:b,tag:d,props:{},children:[{type:a,value:T}]},{type:a,value:U},{type:b,tag:d,props:{},children:[{type:a,value:V}]},{type:a,value:": number of checks against this entry\n"},{type:b,tag:d,props:{},children:[{type:a,value:W}]},{type:a,value:": number of checks while the host was +grey+ (sender)."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:H},{type:b,tag:d,props:{},children:[{type:a,value:"grey"}]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:J,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,N]},children:[{type:b,tag:O,props:{},children:[{type:a,value:"{ created: TS, updated: TS, lifetime: TTL, tried: Integer }\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:P},{type:b,tag:d,props:{},children:[{type:a,value:"created"}]},{type:a,value:": TS of first connection (copied to "},{type:b,tag:d,props:{},children:[{type:a,value:Q}]},{type:a,value:X},{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:" after promotion)\n"},{type:b,tag:d,props:{},children:[{type:a,value:R}]},{type:a,value:S},{type:b,tag:d,props:{},children:[{type:a,value:T}]},{type:a,value:U},{type:b,tag:d,props:{},children:[{type:a,value:V}]},{type:a,value:": number of checks against this entry (copied to "},{type:b,tag:d,props:{},children:[{type:a,value:W}]},{type:a,value:X},{type:b,tag:d,props:{},children:[{type:a,value:h}]},{type:a,value:" after promotion)"}]},{type:a,value:c},{type:b,tag:p,props:{id:C},children:[{type:b,tag:i,props:{ariaHidden:j,href:"#whitelisting",tabIndex:k},children:[{type:b,tag:l,props:{className:[m,n]},children:[]}]},{type:a,value:D}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"It's possible to whitelist hosts using the following section in greylist.ini config file:"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"ip_whitelist               IP or subnet (prefix notation)"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"envelope_whitelist         MAIL FROM (email or domain)"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"recipient_whitelist        RCPT TO  (email or domain)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"List of known dynamic hosts, to use the IP instead of the domain:"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"special_dynamic_domains    Domain"}]},{type:a,value:c}]}]},dir:"\u002Fen\u002Fplugins",path:"\u002Fen\u002Fplugins\u002Fgreylist",extension:".md",createdAt:Y,updatedAt:Y,to:"\u002Fplugins\u002Fgreylist"},prev:{slug:Z,title:Z,to:"\u002Fplugins\u002Fesets"},next:{slug:_,title:_,to:"\u002Fplugins\u002Fgraph"}}],fetch:[],mutations:[]}}("text","element","\n","em","li","p","ul","white","a","true",-1,"span","icon","icon-link",3,"h3","gray",".","black","?\n","principles-of-work","Principles of work","notation","Notation","algorithm","Algorithm","db-schema","DB schema","whitelisting","Whitelisting","tuple","hostid","recipient","For ",":","div","nuxt-content-highlight","pre","language-text","line-numbers","code","Where\n","first_connect","updated",": last update TS\n","lifetime",": seconds for this entry to exist (== TTL)\n","tried","tried_when_greylisted"," of ","2021-06-20T10:01:43.409Z","esets","graph")));